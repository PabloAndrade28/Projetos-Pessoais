{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pablo\\\\Desktop\\\\shaw-Pablo-Silva\\\\modulo6\\\\gitsearch\\\\src\\\\Context\\\\index.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { createContext, useState, useContext, useCallback } from 'react';\nimport api from '../Services/api';\nimport { v4 as uuidv4 } from 'uuid';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst InfoContext = /*#__PURE__*/createContext({});\n\nconst InfoProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [history, setHistory] = useState([]);\n  const [user, setUser] = useState({});\n  const navigate = useNavigate();\n  const getUser = useCallback(async nickname => {\n    const historyStorage = localStorage.getItem('@search:history');\n    const historyStorageParsed = historyStorage ? JSON.parse(historyStorage) : [];\n\n    try {\n      const {\n        data\n      } = await api.get(`users?q=${nickname}`);\n      const user = {\n        id: uuidv4(),\n        name: data.items[0].login,\n        avatar: data.items[0].avatar_url\n      };\n      historyStorageParsed.push({\n        id: uuidv4(),\n        name: nickname\n      });\n      setUser(user);\n      setHistory(historyStorageParsed);\n      localStorage.setItem('@search:history', JSON.stringify(historyStorageParsed));\n      console.log('funfou get user');\n\n      if (window.location.pathname.includes('history')) {\n        navigate('/');\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(InfoContext.Provider, {\n    value: {\n      user,\n      history,\n      getUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n\n_s(InfoProvider, \"sfcnjEtIxINqUCdhVDeSNKmJGqE=\", false, function () {\n  return [useNavigate];\n});\n\n_c = InfoProvider;\n\nfunction useInfo() {\n  _s2();\n\n  const context = useContext(InfoContext);\n\n  if (!context) {\n    throw new Error('useAccounts must be used within an AccountProvider');\n  }\n\n  return context;\n}\n\n_s2(useInfo, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nexport { InfoProvider, useInfo };\n\nvar _c;\n\n$RefreshReg$(_c, \"InfoProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useCallback","api","v4","uuidv4","useNavigate","InfoContext","InfoProvider","children","history","setHistory","user","setUser","navigate","getUser","nickname","historyStorage","localStorage","getItem","historyStorageParsed","JSON","parse","data","get","id","name","items","login","avatar","avatar_url","push","setItem","stringify","console","log","window","location","pathname","includes","err","useInfo","context","Error"],"sources":["C:/Users/pablo/Desktop/shaw-Pablo-Silva/modulo6/gitsearch/src/Context/index.js"],"sourcesContent":["import React, { createContext, useState, useContext, useCallback } from 'react';\r\n\r\nimport api from '../Services/api';\r\n\r\nimport { v4 as uuidv4 } from 'uuid'\r\n\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst InfoContext = createContext({});\r\n\r\nconst InfoProvider = ({ children }) => {\r\n  const [history, setHistory] = useState([]);\r\n  const [user, setUser] = useState({});\r\n\r\n  const navigate = useNavigate()\r\n\r\n   const getUser = useCallback(async nickname => {\r\n    const historyStorage = localStorage.getItem('@search:history')\r\n    const historyStorageParsed = historyStorage ? JSON.parse(historyStorage) : []\r\n\r\n    try {\r\n      const { data } = await api.get(`users?q=${nickname}`)\r\n\r\n      const user = {\r\n        id: uuidv4(),\r\n        name: data.items[0].login,\r\n        avatar: data.items[0].avatar_url\r\n      }\r\n\r\n      historyStorageParsed.push({\r\n        id: uuidv4(),\r\n        name: nickname\r\n      })\r\n\r\n      setUser(user)\r\n      setHistory(historyStorageParsed)\r\n\r\n      localStorage.setItem('@search:history', JSON.stringify(historyStorageParsed))\r\n\r\n      console.log('funfou get user')\r\n\r\n      if(window.location.pathname.includes('history')){\r\n        navigate('/')\r\n      }\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n\r\n  }, []);\r\n\r\n  return (\r\n    <InfoContext.Provider\r\n      value={{\r\n        user,\r\n        history,\r\n        getUser\r\n      }}>\r\n      {children}\r\n    </InfoContext.Provider>\r\n  );\r\n};\r\n\r\nfunction useInfo() {\r\n  const context = useContext(InfoContext);\r\n\r\n  if (!context) {\r\n    throw new Error('useAccounts must be used within an AccountProvider');\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\nexport { InfoProvider, useInfo };"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,QAA/B,EAAyCC,UAAzC,EAAqDC,WAArD,QAAwE,OAAxE;AAEA,OAAOC,GAAP,MAAgB,iBAAhB;AAEA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AAEA,SAASC,WAAT,QAA4B,kBAA5B;;AAEA,MAAMC,WAAW,gBAAGR,aAAa,CAAC,EAAD,CAAjC;;AAEA,MAAMS,YAAY,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EACrC,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACY,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAC,EAAD,CAAhC;EAEA,MAAMc,QAAQ,GAAGR,WAAW,EAA5B;EAEC,MAAMS,OAAO,GAAGb,WAAW,CAAC,MAAMc,QAAN,IAAkB;IAC7C,MAAMC,cAAc,GAAGC,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAvB;IACA,MAAMC,oBAAoB,GAAGH,cAAc,GAAGI,IAAI,CAACC,KAAL,CAAWL,cAAX,CAAH,GAAgC,EAA3E;;IAEA,IAAI;MACF,MAAM;QAAEM;MAAF,IAAW,MAAMpB,GAAG,CAACqB,GAAJ,CAAS,WAAUR,QAAS,EAA5B,CAAvB;MAEA,MAAMJ,IAAI,GAAG;QACXa,EAAE,EAAEpB,MAAM,EADC;QAEXqB,IAAI,EAAEH,IAAI,CAACI,KAAL,CAAW,CAAX,EAAcC,KAFT;QAGXC,MAAM,EAAEN,IAAI,CAACI,KAAL,CAAW,CAAX,EAAcG;MAHX,CAAb;MAMAV,oBAAoB,CAACW,IAArB,CAA0B;QACxBN,EAAE,EAAEpB,MAAM,EADc;QAExBqB,IAAI,EAAEV;MAFkB,CAA1B;MAKAH,OAAO,CAACD,IAAD,CAAP;MACAD,UAAU,CAACS,oBAAD,CAAV;MAEAF,YAAY,CAACc,OAAb,CAAqB,iBAArB,EAAwCX,IAAI,CAACY,SAAL,CAAeb,oBAAf,CAAxC;MAEAc,OAAO,CAACC,GAAR,CAAY,iBAAZ;;MAEA,IAAGC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAAyBC,QAAzB,CAAkC,SAAlC,CAAH,EAAgD;QAC9CzB,QAAQ,CAAC,GAAD,CAAR;MACD;IACF,CAxBD,CAwBE,OAAO0B,GAAP,EAAY;MACZN,OAAO,CAACC,GAAR,CAAYK,GAAZ;IACD;EAEF,CAhC2B,EAgCzB,EAhCyB,CAA3B;EAkCD,oBACE,QAAC,WAAD,CAAa,QAAb;IACE,KAAK,EAAE;MACL5B,IADK;MAELF,OAFK;MAGLK;IAHK,CADT;IAAA,UAMGN;EANH;IAAA;IAAA;IAAA;EAAA,QADF;AAUD,CAlDD;;GAAMD,Y;UAIaF,W;;;KAJbE,Y;;AAoDN,SAASiC,OAAT,GAAmB;EAAA;;EACjB,MAAMC,OAAO,GAAGzC,UAAU,CAACM,WAAD,CAA1B;;EAEA,IAAI,CAACmC,OAAL,EAAc;IACZ,MAAM,IAAIC,KAAJ,CAAU,oDAAV,CAAN;EACD;;EAED,OAAOD,OAAP;AACD;;IARQD,O;;AAUT,SAASjC,YAAT,EAAuBiC,OAAvB"},"metadata":{},"sourceType":"module"}